<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="Generator" content="EditPlus®">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <link href="../../maychangecss/newblog_nomal.css" type="text/css" rel="stylesheet">
  <title>【LODOP】【JAVASCRIPT】获取当前浏览器地址栏的地址（LODOP的ip或域名注册）（文案，初）</title>
 </head>
 <body>
 <style>
 body{margin:0px;}
.body {width:100%;}
a{text-decoration:none;color:black;}
h1{font-size:1.625em;}
h2{font-size:1.375em;}
/**.box{float:left;}**/
.header_box {width:100%;}
.header{padding:1%;
background-color:#f1f1f1;}
/**border:1px solid #e9e9e9;}**/

.header_bottom{width:100%;}
.menuitem {
    margin-top:0;
    margin-left:0;
    margin-bottom:0;
    padding:1%;
    border-bottom:1px solid #e9e9e9;
    cursor:pointer;
}

.main {padding:1%;}
.main_middle { width:100%;}
.blue{color:#95bfc7;}


.box_footer {width:100%;margin-bottom:0;}
.footer {
    padding:1%;
    text-align:center;
    background-color:#f1f1f1;
    font-size:0.625em;
}

@media only screen and (max-width: 500px) {
    .menu_left{width:100%;}
    .menuitem { margin:1%;padding:1%;}

    .main_middle { width:100%;}
    .main {padding:1%;}

    .box_right {width:100%;}
    .right { padding:1%;
    }

    .box { margin-right:0; float:left; }
}

</style>
<div class="body"><!--body开始-->
        <div class="box header_box"><!--header开始-->
            <div class="header">
                <h1>博文-【LODOP】【JAVASCRIPT】获取当前浏览器地址栏的地址（LODOP的ip或域名注册）（文案，初） </h1>
            </div>
        </div><!--header结束-->
<div class="header_bottom"> 
		   <a href="../../index.html"><div class="menuitem">花谢悦神的主页</div></a>	
		   <a href="../phoneQA004.html"><div class="menuitem">lodop问答主页</div></a> 
		   <a href="../phoneQA_dange.html"><div class="menuitem">问答主页（单个问答链接）</div></a> 
		   <a href="../mini_QAs.html"><div class="menuitem"><span style="color:#ff0099;">迷你一个问答</span></div></a> 
		   <a href="../new_bloglist.html"><div class="menuitem"><span class="newblogfont">新博文newblogs</span></div></a>
</div>
        <div class="box main_middle"><!--main_middle开始-->
            <div class="main">
<h1>【LODOP】【JAVASCRIPT】获取当前浏览器地址栏的地址（LODOP的ip或域名注册）（文案，初）</h1>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>window.location.href<br />获取当前页面完整的URL</p>
<p>window.location.host<br />获取当前主机名称和端口号</p>
<p>window.location.hostname<br />获取当前主机名（域名）</p>
<p>window.location.protocol<br />获取当前页面协议</p>
<p>当一些注册号验证的是浏览器地址栏的地址时，例如LODOP绑定ip或域名的注册号，指的是当前的主机名（域名）<br />验证不需要网络，即使是内网等也可以正常验证，本地验证<br />验证浏览器地址栏的地址，和注册语句一致，就可以去掉水印</p>
<p>LODOP的注册号不限协议，http或https网站都有效，不限端口。<br />验证的是当前浏览器地址栏的主机ip或域名，ip访问方式注册ip，域名访问方式可注册域名</p>
<p>（1）.单独注册服务器ip地址，登陆访问方式是ip地址访问，例如：注册ip地址：192.168.0.1，登陆方式如下<br />：http：//192.168.0.1:8000/index.jsp等，域名访问时，注册信息无效。<br />（2）.单独注册域名：登陆访问方式是域名地址访问，例如：注册域名： www.c-lodop.com 登陆方式如下<br />：http://www.c-lodop.com/index.html等，ip地址访问时，注册信息无效</p>
<p><br />看一下输出的结果：<br />例如：用c-lodop的本地的欢迎页面为例，http://localhost:8000/<br />console.log("window.location.href的输出结果"+window.location.href);<br />console.log("window.location.host的输出结果"+window.location.host);<br />console.log("window.location.hostname的输出结果"+window.location.hostname);<br />console.log("window.location.protocol的输出结果"+window.location.protocol);</p>
<p>输出结果如图：<br />（图）<br />window.location.hostname就是当前浏览器地址栏验证的主机地址，<br />当前页面是localhost，如果是自己的网站，就是自己网站的访问主机地址。</p>
<p>例如：http://127.0.0.1:8000/<br />（图）<br />127.0.0.1就是当前网站的主机地址。</p>
<p>注意：<br />LODOP的ip或域名注册，根据访问方式注册<br />如果是域名访问，注册域名背后的IP是无效的，访问哪个注册哪种</p>
<p>-------------------<br />关于协议<br />window.location.protocol<br />获取当前页面协议</p>
<p>在最新版的lodopFucns.js中（下载中心发行包里http://www.c-lodop.com/download.html）<br />（图）<br />if (window.location.protocol !== 'https:')</p>
<p>可以看到就是利用这个判断当前的协议，根据不同的协议，走不同的地址。<br />当c-lodop用于客户端本地打印角色时，http和https地址不同，且端口也不同。<br />（图）</p>
<p>在c-lodop启动成功界面左上角设置里，可以查看当前启动的端口，lodopFuncs.js里的写的就是默认时的端口。<br />如果当有端口被占用时，会有差异，大部分情况下不会被占用<br />且http目前是双端口，8000和18000双端口一个能用就行。<br />https的8443端口被占用，会加一，变成8444，一般不会出现，如果要写8444，可以增加优先级，增加备用端口。</p>
<p>http://localhost:8000/CLodopFuncs.js?priority=1<br />参数Priority是服务优先级，数值越大优先级越高，默认端口可以设置优先级最高，然后是备用的端口，会根据优先级找端口，前面的找不到再找下面优先级的。</p>
<p>----------------<br />如果有多个访问地址，比如该网站既可以ip访问，也可以域名访问。<br />可以多个注册号合并一个语句</p>
<p>（图）<br />参考lodop技术手册，该注册语句附加参数，合成一个注册语句<br />注意ip或域名注册，第一个参数是空的，不要加在第一个参数上面，合并可以附件后面两个附加的。</p>
<p>如果超过三个，一个语句无法装下，不能用多个语句，否则之后的语句会冲掉前面的语句。<br />超过三个可以加判断，通过判断当前的地址，走哪个语句</p>
<p> 一个页面加的注册号超过3个，产生了覆盖。此时正确的调用方法举例如下：<br />if (window.location.hostname.indexOf("192.168.0.1")&gt;-1) {LODOP.SET_LICENSES("","192.168.0.1的注册号","",""); } else<br />if (window.location.hostname.indexOf("192.168.0.2")&gt;-1) {LODOP.SET_LICENSES("","192.168.0.2的注册号","",""); } else<br />if (window.location.hostname.indexOf("192.168.0.3")&gt;-1) {LODOP.SET_LICENSES("","192.168.0.3的注册号","",""); } else<br />if (window.location.hostname.indexOf("192.168.0.4")&gt;-1) {LODOP.SET_LICENSES("","192.168.0.4的注册号","",""); } else<br />......</p>
<p>如果是公司名称注册和ip(或域名）注册同时使用，可以加判断<br />判断是当前ip(或域名），走ip或域名注册<br />不是，走公司名称注册。</p>
<p>例如：有客户不想预览下方状态栏显示公司名，有的客户可以接受，可以根据不同项目，选择不同的注册号。</p>
<p>&nbsp;</p>
<p>window.location.pathname<br />获取当前页面的相对路径</p>
</div>
<p>&nbsp;</p>
</div>
</div>
    </div><!--main_middle结束-->

        <div class="box box_footer"><!--box_footer开始-->
            <div class="footer">
<p>lodop简短问答页面.</p>
            </div>
        </div><!--box_footer结束-->
</div><!--body结束-->
 </body>
</html>
