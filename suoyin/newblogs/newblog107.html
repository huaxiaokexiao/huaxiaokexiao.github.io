<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="Generator" content="EditPlus®">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <link href="../../maychangecss/newblog_nomal.css" type="text/css" rel="stylesheet">
  <title>【LODOP】提示“网页还没下载完毕，请稍等一下再操作.”（2）不提示下载安装（newblog107）（文案，初）</title>
 </head>
 <body>
 <style>
 body{margin:0px;}
.body {width:100%;}
a{text-decoration:none;color:black;}
h1{font-size:1.625em;}
h2{font-size:1.375em;}
/**.box{float:left;}**/
.header_box {width:100%;}
.header{padding:1%;
background-color:#f1f1f1;}
/**border:1px solid #e9e9e9;}**/

.header_bottom{width:100%;}
.menuitem {
    margin-top:0;
    margin-left:0;
    margin-bottom:0;
    padding:1%;
    border-bottom:1px solid #e9e9e9;
    cursor:pointer;
}

.main {padding:1%;}
.main_middle { width:100%;}
.blue{color:#95bfc7;}


.box_footer {width:100%;margin-bottom:0;}
.footer {
    padding:1%;
    text-align:center;
    background-color:#f1f1f1;
    font-size:0.625em;
}

@media only screen and (max-width: 500px) {
    .menu_left{width:100%;}
    .menuitem { margin:1%;padding:1%;}

    .main_middle { width:100%;}
    .main {padding:1%;}

    .box_right {width:100%;}
    .right { padding:1%;
    }

    .box { margin-right:0; float:left; }
}

</style>
<div class="body"><!--body开始-->
        <div class="box header_box"><!--header开始-->
            <div class="header">
                <h1>博文-【LODOP】提示“网页还没下载完毕，请稍等一下再操作.”（2）不提示下载安装（newblog107）（文案，初）</h1>
            </div>
        </div><!--header结束-->
<div class="header_bottom"> 
		   <a href="../../index.html"><div class="menuitem">花谢悦神的主页</div></a>	
		   <a href="../phoneQA004.html"><div class="menuitem">lodop问答主页</div></a> 
		   <a href="../phoneQA_dange.html"><div class="menuitem">问答主页（单个问答链接）</div></a> 
		   <a href="../mini_QAs.html"><div class="menuitem"><span style="color:#ff0099;">迷你一个问答</span></div></a> 
		   <a href="../new_bloglist.html"><div class="menuitem"><span class="newblogfont">新博文newblogs</span></div></a>
</div>
        <div class="box main_middle"><!--main_middle开始-->
            <div class="main">
<h1>【LODOP】提示“网页还没下载完毕，请稍等一下再操作.”（2）不提示下载安装（newblog107）（文案，初）</h1>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>之前有个相关视频，时间比较久了，这里再补充一下，并根据新版解释下<br />（图）</p>
<p>类似的提示还有：<br />&ldquo;C-Lodop未准备好&rdquo;<br />&ldquo;WebSocket没准备好&rdquo;</p>
<p>&ldquo;网页还没下载完毕，请稍等一下再操作.&rdquo;这个新版的提示。</p>
<p>这个提示是从哪里来的？<br />新版的lodopFuncs.js里<br />（图）</p>
<p>lodopFuncs.js在哪里？<br />（图）<br />下载中心发行包里 <br />http://www.c-lodop.com/download.html</p>
<p><br />参考http://www.c-lodop.com/faq/pp3.html<br />原因：<br />在页面第一次加载完成后有几百毫秒时间等待WebSocket通讯服务准备完成，c-lodop需要准备时间。<br />如果是http的网站，目前最新版lodopFuncs.js有四个地址中有能加载到clodopFuncs.js，即可以获取到LODOP对象。<br />（图）</p>
<p>已经安装了，提示这个怎么处理？<br />参考http://www.c-lodop.com/faq/pp3.html<br />如果是页面点击后打印，把获取LODOP对象放在打印按钮里触发。进入页面稍等一会再点击，参考样例2http://www.c-lodop.com/demolist/PrintSample2.html<br />如果是需要一进入页面就进行打印，不需要点击页面的按钮等触发，可参考链接里的处理方法，加延迟或等c-lodop加载完再调用。</p>
<p>没安装，想测试提示下载安装，怎么提示这个，不提示下载安装？</p>
<p>（图）<br />如图，查看下当前控制台情况，需要等前四个报错完成，再点击会提示下载安装。</p>
<p>情况1：是点击后调用。<br />（例如，让客户点击按钮，或链接等触发方式）</p>
<p>解决方法：<br />进入页面稍等一会再点击，等c-lodop准备好，lodopFuncs.js里判断完成。</p>
<p>这边用样例2演示下还原这个问题：<br />http://www.c-lodop.com/demolist/PrintSample2.html</p>
<p>情况1：<br />进入页面立刻点击样例2的打印预览按钮<br />（图）<br />可以看到控制台还没报任何错误，这时候点击预览按钮调用LODOP，提示网页还没下载完。</p>
<p>点这个弹窗的确定，再查看下控制台情况，看下顺序：<br />（图）<br />如图可以看到，先执行了INIT初始化，再尝试引用clodopFuncs.js，四个报错在INIT后面，这种情况lodopFuncs.js里判断加载还没完成，就开始调用LODOP方法，所以会报这个错误。</p>
<p>情况2：<br />进入页面等了一会了，点击还是提示这个，不提示下载安装，怎么回事？</p>
<p>查看下当前控制台的情况 ：<br />（图）<br />如图，当前只有一个报错信息，四个报错还没完成，就调用了LODOP的对象，所以会提示这个，等待的时间不够长。</p>
<p>点确定后可以看到当前报错情况。<br />先报错ws的8000端口，再报错INIT。<br />ws的18000和http的8000端口，http的18000端口，报错都在INIT后面。</p>
<p>说明当前情况是，lodopFuncs.js里JS还没加载完，就调用了LODOP对象，这种情况不会提示下载安装。</p>
<p>必须是四个报错都完成，才会提示下载安装。</p>
<p>第一个ws的8000访问不了就提示不行吗？为什么要等后面的加载完才提示？<br />这个lodopFuncs.js写好了判断，四个地址只要有一个clodopFucns.js能访问，就能获取到LODOP对象，只有全部判断完成，才能确定当前是没安装c-lodop或没启动。</p>
<p>第一个ws的8000访问不了，有可能是端口不是8000，后面的ws的18000端口就能访问到了。<br />（最新版是双端口）</p>
<p>有些浏览器ws都访问不了，会走http的，也就是前两个ws都访问不到，会尝试http的两个端口。http的8000端口能访问到，也是可以加载到的。</p>
<p>只有四个地址全部判断完成，才能确定当前是没安装c-lodop或没启动。</p>
<p>情况2：<br />不是点击后调用，是一进入页面就调用，加了延迟还是不行，怎么回事？<br />查看下控制台执行情况，是否是四个报错完成，再调用的LODOP对象，如果INIT在报错之前，或四个报错之间，没等四个报错完成，说明延迟的时间不够，还没等到全加载完就调用了。</p>
<p>如何增加延迟时间？<br />setTimeout是JavaScript方法：<br />这个是网上的该方法的介绍：<br />setTimeout() 是属于 window 的方法，该方法用于在指定的毫秒数后调用函数或计算表达式。</p>
<p>格式：<br />setTimeout(要执行的代码, 等待的毫秒数)<br />setTimeout(JavaScript 函数, 等待的毫秒数)<br />第二个参数就是等待的时间，增大这个数值可以增大时间。</p>
<p>setTimeout("print()","500"); </p>
<p>增大时间后再测试下，查看下控制台报错信息，确保四个报错都完成了之后调用的INIT方法。</p>
<p>其他：<br />提示这个，但页面报错不同，不是INIT没定义，是SET_LICENSES没定义？<br />SET_LICENSES是注册语句，和LODOP其他方法一样使用，样例2提示INIT没定义，因为样例2第一个函数就是INIT初始化语句。<br />如果是注册后的，注册语句放在INIT之前的，那么先调用的方法就是SET_LICENSES，因为没安装，获取不到LODOP对象，所以报错的第一个方法就是SET_LICENSES了。</p>
<p>解决方法相同，也是等四个报错完成，再调用LODOP对象的方法就会提示没下载安装。</p>
<p>相关问题：<br />提示下载点击下载不到文件？</p>
<p>放置安装文件到自己项目里，提示下载的路径替换成自己项目的路径。<br />（图）</p>
<p>调试JS，走不到提示的地方，提示网页没下载完？<br />就是前面的问题，等c-lodop准备好，lodopFuncs.js里的报错完成，进入页面调用加延迟，如果是点击，稍等一会点击</p>
<p>调试JS，走到了提示地方，样例有提示，自己的页面不提示？<br />排查是否和自己的页面样式有关，<br />有些页面样式复杂，页面前面无法添加a标签遮挡了，<br />lodopFuncs.js是例子文件，里面的提示方法可以根据需要修改，可以改成弹窗提示等其他提示方式。</p>
</div>
<p>&nbsp;</p>
</div>
</div>
    </div><!--main_middle结束-->

        <div class="box box_footer"><!--box_footer开始-->
            <div class="footer">
<p>lodop简短问答页面.</p>
            </div>
        </div><!--box_footer结束-->
</div><!--body结束-->
 </body>
</html>
