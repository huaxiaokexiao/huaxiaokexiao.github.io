<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="Generator" content="EditPlus®">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <link href="../../maychangecss/newblog_nomal.css" type="text/css" rel="stylesheet">
  <title>【JAVASCRIPT】JS里replace替换字符串（lodop打印前替换样式）（newblog118）（文案，初）</title>
 </head>
 <body>
 <style>
 body{margin:0px;}
.body {width:100%;}
a{text-decoration:none;color:black;}
h1{font-size:1.625em;}
h2{font-size:1.375em;}
/**.box{float:left;}**/
.header_box {width:100%;}
.header{padding:1%;
background-color:#f1f1f1;}
/**border:1px solid #e9e9e9;}**/

.header_bottom{width:100%;}
.menuitem {
    margin-top:0;
    margin-left:0;
    margin-bottom:0;
    padding:1%;
    border-bottom:1px solid #e9e9e9;
    cursor:pointer;
}

.main {padding:1%;}
.main_middle { width:100%;}
.blue{color:#95bfc7;}


.box_footer {width:100%;margin-bottom:0;}
.footer {
    padding:1%;
    text-align:center;
    background-color:#f1f1f1;
    font-size:0.625em;
}

@media only screen and (max-width: 500px) {
    .menu_left{width:100%;}
    .menuitem { margin:1%;padding:1%;}

    .main_middle { width:100%;}
    .main {padding:1%;}

    .box_right {width:100%;}
    .right { padding:1%;
    }

    .box { margin-right:0; float:left; }
}

</style>
<div class="body"><!--body开始-->
        <div class="box header_box"><!--header开始-->
            <div class="header">
                <h1>博文-【JAVASCRIPT】JS里replace替换字符串（lodop打印前替换样式）（newblog118）（文案，初）</h1>
            </div>
        </div><!--header结束-->
<div class="header_bottom"> 
		   <a href="../../index.html"><div class="menuitem">花谢悦神的主页</div></a>	
		   <a href="../phoneQA004.html"><div class="menuitem">lodop问答主页</div></a> 
		   <a href="../phoneQA_dange.html"><div class="menuitem">问答主页（单个问答链接）</div></a> 
		   <a href="../mini_QAs.html"><div class="menuitem"><span style="color:#ff0099;">迷你一个问答</span></div></a> 
		   <a href="../new_bloglist.html"><div class="menuitem"><span class="newblogfont">新博文newblogs</span></div></a>
</div>
        <div class="box main_middle"><!--main_middle开始-->
            <div class="main">
<h1>【JAVASCRIPT】JS里replace替换字符串（lodop打印前替换样式）（newblog118）（文案，初）</h1>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>之前的视频：vue中page-break-after:always不能分页（转成了break-after: page）<br />（图）<br />中提到，可以用js里的replace方法替换被转换后的样式，修改替换传入的字符串内容。</p>
<p>之前自己的博文里https://www.cnblogs.com/huaxie/p/11612746.html介绍过该方法，替换的是内容本身，替换htm字符串内容，也是同样的方法，这里演示下替换传入的htm内容样式部分内容的方法。</p>
<p>首先介绍下这个JS方法的格式：<br />语句的格式是: 需要改的字符串.replace(字符串或正则表达式,替换成的字符串)</p>
<p>如果第一个参数用字符串，默认是找到该字符串中的第一个匹配的字符串进行替换，剩下的不会替换。<br />如果是只想替换第一个匹配的内容，可以用字符串或者正则表达式都可以，效果一样，正则表达式的写法是，用斜杠包裹需要替换的内容。</p>
<p>一些正则的规则：<br />加g:全局，替换所有匹配的内容<br />加i：忽略大小写，替换所有忽略大小写后的匹配的内容<br />加ig:忽略大小写，且全局，替换所有匹配的内容<br />用/b内容/b，用反斜杠b包裹：找单词，去掉字母组合前后有其他单词的内容。</p>
<p>为了省时间，这里直接复制样例2的表格，演示一下替换传入的htm字符串里的样式。<br />首先，演示替换替换该字符串找到的第一个匹配内容：<br />（图）</p>
<p>这里弄了两个打印预览，第一个预览是原始页面的样式，第二个是替换了某些字符串的：<br />这里是把该字符串的匹配到的第一个#ffff00蓝色，替换成#ffff00黄色。</p>
<p>var strFormHtml=document.getElementById("form1").innerHTML;<br />LODOP.ADD_PRINT_HTM(88,200,350,600,strFormHtml);  </p>
<p>var strFormHtml2=document.getElementById("form1").innerHTML;<br />strFormHtml2=strFormHtml2.replace(/#0000FF"/,'#ffff00"');<br />//替换该字符串第一个#0000FF为#ffff00<br />LODOP.ADD_PRINT_HTM(88,200,350,600,strFormHtml2);    	</p>
<p>查看下效果：<br />第一个预览，原始内容和样式<br />（图）</p>
<p>第二个预览，第一个#0000FF蓝色的A字，替换成#ffff00黄色<br />（图）</p>
<p>如果想全局替换，所有#0000FF替换成#ffff00，可以后面加g<br />        var strFormHtml2=document.getElementById("form1").innerHTML;<br />        strFormHtml2=strFormHtml2.replace(/#0000FF/g,'#ffff00');<br />（图）</p>
<p>看下效果：<br />所有htm字符串里的蓝色的#0000FF替换为了#ffff00黄色<br />（图）</p>
<p>这个语句可以替换字符串任意部分，例如这里替换表单一第一个表格的style，线条宽度2，颜色为#cc0099紫色：<br />        strFormHtml2=strFormHtml2.replace(/style="border:solid 1px black;border-collapse:collapse"/g,'style="border:solid 2px #cc0099;border-collapse:collapse"');<br />（图）</p>
<p>效果如图：<br />表单1里的style被替换了：<br />（图）</p>
<p>一些时候需要对原始字符串进行处理，除了拼接字符串，变量和字符串拼接出需要的内容。<br />也可以用这个replace替换里面的某些内容，或某些样式，内容和样式都是htm字符串中的字符，所有替换方法相关，都是替换掉需要更换的字符：<br />替换表格1里的线条<br />替换表格2里的外框线条，<br />用替换后的htm在预览中显示<br />（图）</p>
<p>效果如图：<br />页面原始样式<br />（图）<br />替换后的样式：<br />（图）</p>
<p>通过document.getElementById("XX名字").innerHTML可以获得当前html字符串，由于vue等或一些其他框架可能会对一些样式转换，出现该问题时，可以用JS里的这个replace替换掉被转换的样式。</p>
</div>
<p>&nbsp;</p>
</div>
<p>&nbsp;</p>
</div>
</div>
    </div><!--main_middle结束-->

        <div class="box box_footer"><!--box_footer开始-->
            <div class="footer">
<p>lodop简短问答页面.</p>
            </div>
        </div><!--box_footer结束-->
</div><!--body结束-->
 </body>
</html>
